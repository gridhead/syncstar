<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>SyncStar v{{ versdata }}</title>
    <link href="{{ url_for('static', filename='css3/bs.min.css') }}" rel="stylesheet" crossorigin="anonymous">
    <style>
      @font-face {
        font-family: "Barlow Condensed";
        font-weight: 400;
        font-style: normal;
        src: url("{{ url_for('static', filename='font/BarlowCondensed_RLAR.ttf') }}");
      }
      @font-face {
        font-family: "Barlow Condensed";
        font-weight: 400;
        font-style: italic;
        src: url("{{ url_for('static', filename='font/BarlowCondensed_RLIT.ttf') }}");
      }
      @font-face {
        font-family: "Barlow Condensed";
        font-weight: 700;
        font-style: normal;
        src: url("{{ url_for('static', filename='font/BarlowCondensed_BOLD.ttf') }}");
      }
      @font-face {
        font-family: "Open Sans";
        font-weight: 700;
        font-style: italic;
        src: url("{{ url_for('static', filename='font/BarlowCondensed_BDIT.ttf') }}");
      }
      @font-face {
        font-family: "Open Sans";
        font-weight: 400;
        font-style: normal;
        src: url("{{ url_for('static', filename='font/OpenSans_RLAR.ttf') }}");
      }
      @font-face {
        font-family: "Open Sans";
        font-weight: 400;
        font-style: italic;
        src: url("{{ url_for('static', filename='font/OpenSans_RLIT.ttf') }}");
      }
      @font-face {
        font-family: "Open Sans";
        font-weight: 700;
        font-style: normal;
        src: url("{{ url_for('static', filename='font/OpenSans_BOLD.ttf') }}");
      }
      @font-face {
        font-family: "Open Sans";
        font-weight: 700;
        font-style: italic;
        src: url("{{ url_for('static', filename='font/OpenSans_BDIT.ttf') }}");
      }
      .headelem {
        font-family: "Barlow Condensed", sans-serif;
        font-weight: 700;
      }
      .strdelem {
        font-family: "Open Sans", sans-serif;
        font-family: 400;
      }
    </style>
  </head>
  <body onload="activity();">
    <nav class="navbar navbar-expand-lg navbar-dark bg-success">
      <div class="container">
        <a class="navbar-brand headelem" href="#">SyncStar</a>
        <div id="navbar">
          <span class="navbar-text strdelem">
            v{{ versdata }}
          </span>
        </div>
      </div>
    </nav>

    <div class="container mt-2">
      <h1 class="headelem">
        Pending
      </h1>
      <div class="list-group strdelem">
        <a href="#" class="list-group-item list-group-item-success" aria-current="true">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1 headelem">List group item heading</h5>
            <small>3 days ago</small>
          </div>
          <p class="mb-0">Some placeholder content in a paragraph.</p>
          <small>And some small print.</small>
        </a>
        <a href="#" class="list-group-item list-group-item-action">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1 headelem">List group item heading</h5>
            <small class="text-body-secondary">3 days ago</small>
          </div>
          <p class="mb-0">Some placeholder content in a paragraph.</p>
          <small class="text-body-secondary">And some muted small print.</small>
        </a>
        <a href="#" class="list-group-item list-group-item-action">
          <div class="d-flex w-100 justify-content-between">
            <h5 class="mb-1 headelem">List group item heading</h5>
            <small class="text-body-secondary">3 days ago</small>
          </div>
          <p class="mb-0">Some placeholder content in a paragraph.</p>
          <small class="text-body-secondary">And some muted small print.</small>
        </a>
      </div>
    </div>

    <div class="container mt-2">
      <h1 class="headelem">
        Progress
      </h1>
      <ul class="list-group strdelem">
        <li class="list-group-item d-flex justify-content-between align-items-center list-group-item-success">
          A list item
          <span class="badge text-bg-success rounded-pill">14% complete</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          A second list item
          <span class="badge text-bg-success rounded-pill">20% complete</span>
        </li>
        <li class="list-group-item d-flex justify-content-between align-items-center">
          A third list item
          <span class="badge text-bg-success rounded-pill">10% complete</span>
        </li>
      </ul>
    </div>

    <nav class="navbar fixed-bottom bg-body-secondary">
      <div class="container">
        <a class="navbar-brand" href="#">Fixed bottom</a>
        <span class="navbar-text strdelem" id="lastupdt">
          Last updated on 00:00:00 00/00/00
        </span>
      </div>
    </nav>

    <div class="modal fade" id="authrepo" data-bs-backdrop="static">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body">
            <h1 class="headelem mb-5 text-danger" style="text-align: center;">
              Disconnected
            </h1>
            <p style="text-align: center;" class="strdelem">
              Please refresh your current browser window to reestablish the connection to the service.
            </p>
          </div>
        </div>
      </div>
    </div>

    <script>

      let disconnected = false;

      function invoke_disconnected_window () {
        disconnected = true;
        const authrepo = new bootstrap.Modal("#authrepo");
        authrepo.toggle();
      }

      function retrieve_time() {
        if (disconnected === false) {
          try {
            let rqstobjc = new XMLHttpRequest();
            rqstobjc.open("GET", "/time/{{ rqstcode }}", false);
            rqstobjc.send(null);
            if (rqstobjc.status === 200) {
              document.getElementById("lastupdt").innerText = "Last updated on " + rqstobjc.responseText;
            } else {
              invoke_disconnected_window();
            }
            console.log(rqstobjc.status)
            return rqstobjc.responseText;
          } catch(expt) {
            invoke_disconnected_window();
          }
        }
      }

      window.onload = function activity() {
        setInterval(retrieve_time, 1000);
      };

    </script>

    <script src="{{ url_for('static', filename='jscn/bs.min.js') }}" crossorigin="anonymous"></script>
  </body>
</html>
